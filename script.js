(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const m={t3:{title:"T3 Chat",domain:"www.t3.chat",url:"https://www.t3.chat/new?q={{{s}}}"},g:{title:"Google",domain:"google.com",url:"https://www.google.com/search?q={{{s}}}"},gi:{title:"Google Images",domain:"google.com",url:"https://google.com/search?tbm=isch&q={{{s}}}&tbs=imgo:1"},yt:{title:"YouTube",domain:"youtube.com",url:"https://www.youtube.com/results?search_query={{{s}}}"},w:{title:"Wikipedia",domain:"wikipedia.org",url:"https://wikipedia.org/w/index.php?search={{{s}}}"},a:{title:"Amazon",domain:"amazon.com",url:"https://www.amazon.com/s?k={{{s}}}"},gh:{title:"GitHub",domain:"github.com",url:"https://github.com/search?q={{{s}}}"},so:{title:"Stack Overflow",domain:"stackoverflow.com",url:"https://stackoverflow.com/search?q={{{s}}}"},r:{title:"Reddit",domain:"reddit.com",url:"https://www.reddit.com/search/?q={{{s}}}"},sr:{title:"Reddit Subreddit",domain:"reddit.com",url:"https://www.reddit.com/r/{{{s}}}"},npm:{title:"npm",domain:"npmjs.com",url:"https://www.npmjs.com/search?q={{{s}}}"},maps:{title:"Google Maps",domain:"google.com/maps",url:"https://www.google.com/maps/search/{{{s}}}"},x:{title:"X",domain:"x.com",url:"https://x.com/search?q={{{s}}}"},gt:{title:"Google Translate",domain:"translate.google.com",url:"https://translate.google.com/?sl={{{a2}}}&tl={{{a1}}}&text={{{s}}}&op=translate"}},p="custom_squirts",v=/!(\S+)/i,S=/>(\S+)/g,I=/!\S+\s*/i,b=/>\S+\s*/g;function L(e){return e?e.length<1?"Key must be at least 1 character":/^[a-zA-Z0-9]+$/.test(e)?m[e]?"This key is reserved for default squirts":null:"Key must contain only letters and numbers":"Key is required"}function w(e){if(!e||!e.includes("{{{s}}}"))return!1;try{return new URL(e.replace("{{{s}}}","test")),!0}catch{return!1}}function g(){try{const e=localStorage.getItem(p);if(!e)return{};const r=JSON.parse(e);if(typeof r!="object"||r===null)return{};const n={};for(const[o,t]of Object.entries(r))typeof t=="object"&&t!==null&&"domain"in t&&"title"in t&&"url"in t&&typeof t.domain=="string"&&typeof t.title=="string"&&typeof t.url=="string"&&w(t.url)&&(n[o]=t);return n}catch{return{}}}const h=g(),B={...m,...h};function x(e){var i;const r=e.match(v),n=(i=r==null?void 0:r[1])==null?void 0:i.toLowerCase(),o=Array.from(e.matchAll(S)).map(l=>l[1]);let t=e.replace(I,"");o.length>0&&(t=t.replace(b,"")),t=encodeURIComponent(t.trim()).replace(/%2F/g,"/");const s=n&&B[n]||m.g;if(n==="gt"){const l=o.length===0?["en","auto"]:o.length===1?[o[0],"auto"]:[o[0],o[1]];return{selectedBang:s,cleanQuery:t,args:l,possibleSquirt:n}}return{selectedBang:s,cleanQuery:t,args:o,possibleSquirt:n}}function C(){var i;const r=((i=new URL(window.location.href).searchParams.get("q"))==null?void 0:i.trim())??"";if(!r)return null;const{selectedBang:n,possibleSquirt:o,cleanQuery:t,args:s}=x(r);if(!n)return null;if(o==="gt"){const[l,u]=s;return n.url.replace("{{{a1}}}",l).replace("{{{a2}}}",u).replace("{{{s}}}",t)}return n.url.replace("{{{s}}}",t)}function d(e,r){const n=document.getElementById(e);if(!n||!n.parentElement)return;const o=n.parentElement.querySelector(".text-red-500");o&&(o==null||o.remove());const t=document.createElement("div");t.className="text-red-500 text-sm mt-1",t.textContent=r,n.classList.add("border-red-500"),n.parentElement.appendChild(t)}function O(){const e=document.getElementById("add-squirt-form");e&&(e.querySelectorAll(".text-red-500").forEach(r=>r.remove()),e.querySelectorAll("input").forEach(r=>r.classList.remove("border-red-500")))}function R(e,r,n){O();const o=L(e);if(o)return d("squirt-key",o),!1;if(!w(n))return d("squirt-url","Invalid URL"),!1;if(!r)return d("squirt-title","Title is required"),!1;try{const s=new URL(n).hostname;if(!s)return d("squirt-url","Domain is required"),!1;const i={...g(),[e]:{title:r,domain:s,url:n}};return localStorage.setItem(p,JSON.stringify(i)),!0}catch{return d("squirt-url","Invalid URL format"),!1}}function f(){const e=document.getElementById("squirt-key"),r=document.getElementById("squirt-title"),n=document.getElementById("squirt-url"),o=document.getElementById("preview-key"),t=document.getElementById("preview-title"),s=document.getElementById("preview-url");if(!o||!t||!s)return;o.textContent=`!${(e==null?void 0:e.value)||""}`,t.textContent=(r==null?void 0:r.value)||"Example Search";const i=(n==null?void 0:n.value)||"https://example.com?q={{{s}}}";s.textContent=i.replace("{{{s}}}","test")}function A(e){const r=h[e];if(!r)return;const n=document.getElementById("squirt-key"),o=document.getElementById("squirt-title"),t=document.getElementById("squirt-url");!n||!o||!t||(n.value=e,o.value=r.title,t.value=r.url,f())}function G(e){if(!confirm(`Are you sure you want to delete ${e}?`))return;const r={...g()};delete r[e],localStorage.setItem(p,JSON.stringify(r)),location.reload()}function q(e,r,n=!1){const o=document.createElement("li");o.classList.add("flex","flex-col","gap-1","border-b","pb-1");const t=document.createElement("div");t.classList.add("flex","justify-between");const s=document.createElement("span");s.classList.add("font-mono"),s.innerText=`!${e}`;const i=document.createElement("span");i.classList.add("text-muted-foreground"),i.innerText=r.title;const l=document.createElement("span");if(l.classList.add("text-muted-foreground","text-xs"),l.innerText=r.url,t.appendChild(s),t.appendChild(i),n){const u=document.createElement("div");u.classList.add("flex","gap-1","items-center","self-end");const c=document.createElement("button");c.classList.add("bg-blue-500","text-white","w-4","h-4","rounded-full"),c.addEventListener("click",()=>A(e));const a=document.createElement("button");a.classList.add("bg-destructive","text-destructive-foreground","w-4","h-4","rounded-full"),a.addEventListener("click",()=>G(e)),u.appendChild(c),u.appendChild(a),t.appendChild(u)}return o.appendChild(t),o.appendChild(l),o}function U(){const e=document.getElementById("main");if(!e)return;e.hidden=!1;const r=document.getElementById("query-url");r&&(r.value=`${window.location.href}?q=%s`);const n=document.getElementById("default-squirts");if(n)for(const[u,c]of Object.entries(m))n.appendChild(q(u,c));const o=document.getElementById("custom-squirts");if(o)for(const[u,c]of Object.entries(h))o.appendChild(q(u,c,!0));const t=document.getElementById("add-squirt-form");t&&t.addEventListener("submit",u=>{u.preventDefault();const c=document.getElementById("squirt-key"),a=document.getElementById("squirt-title"),y=document.getElementById("squirt-url");c&&a&&y&&R(c.value,a.value,y.value)&&(t.reset(),location.reload())});const s=document.getElementById("squirt-key"),i=document.getElementById("squirt-title"),l=document.getElementById("squirt-url");s&&i&&l&&(s.addEventListener("input",f),i.addEventListener("input",f),l.addEventListener("input",f))}const E=C();E?(document.body.hidden=!0,window.location.replace(E)):document.addEventListener("DOMContentLoaded",()=>{U()});
